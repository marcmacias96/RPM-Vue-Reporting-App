(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaca1196"],{"15b8":function(e,t,a){e.exports=a("e1b7")},"1faa":function(e,t,a){"use strict";var r=a("c1ff"),i=a.n(r);i.a},"2f21":function(e,t,a){"use strict";var r=a("79e5");e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"522e":function(e,t,a){var r=a("f772"),i=a("ebfd").onFreeze;a("ce7e")("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},"55dd":function(e,t,a){"use strict";var r=a("5ca1"),i=a("d8e8"),n=a("4bf8"),s=a("79e5"),l=[].sort,o=[1,2,3];r(r.P+r.F*(s((function(){o.sort(void 0)}))||!s((function(){o.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),i(e))}})},aa77:function(e,t,a){var r=a("5ca1"),i=a("be13"),n=a("79e5"),s=a("fdef"),l="["+s+"]",o="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e,t,a){var i={},l=n((function(){return!!s[e]()||o[e]()!=o})),c=i[e]=l?t(p):s[e];a&&(i[a]=c),r(r.P+r.F*l,"String",i)},p=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},aede:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("d847"),i=a.n(r),n=a("15b8"),s=a.n(n);function l(e,t){return t||(t=e.slice(0)),s()(i()(e,{raw:{value:s()(t)}}))}},c1ff:function(e,t,a){},c5f6:function(e,t,a){"use strict";var r=a("7726"),i=a("69a8"),n=a("2d95"),s=a("5dbc"),l=a("6a99"),o=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",m=r[f],h=m,y=m.prototype,v=n(a("2aeb")(y))==f,g="trim"in String.prototype,b=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():p(t,3);var a,r,i,n=t.charCodeAt(0);if(43===n||45===n){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var s,o=t.slice(2),c=0,u=o.length;c<u;c++)if(s=o.charCodeAt(c),s<48||s>i)return NaN;return parseInt(o,r)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof m&&(v?o((function(){y.valueOf.call(a)})):n(a)!=f)?s(new h(b(t)),a,m):b(t)};for(var _,w=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;w.length>F;F++)i(h,_=w[F])&&!i(m,_)&&d(m,_,u(h,_));m.prototype=y,y.constructor=m,a("2aba")(r,f,m)}},d22f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"Fecha Inicio","end-placeholder":"Fecha Fin",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.fechas,callback:function(t){e.$set(e.listQuery,"fechas",t)},expression:"listQuery.fechas"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"Nro Comprobante"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"Usuario"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.user,callback:function(t){e.$set(e.listQuery,"user",t)},expression:"listQuery.user"}}),e._v(" "),a("el-select",{attrs:{placeholder:"Tipo Reporte"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.repOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      Search\n    ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"total-container",attrs:{type:"info"}},[e._v(" Total Recaudado $ "+e._s(e.formatPrice(e.total))+" ")])],1),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.rep_comprobantes,border:"",fit:"",height:"550","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Comprobante",width:"150px",prop:"ProformaFactura.NroFactura",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Fecha-Hora",width:"120px",prop:"ProformaFactura.FacturadoEn",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Cedula",width:"130px",prop:"ProformaFactura.clienteByCliente.CedRuc",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Contribuyente","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.ProformaFactura.clienteByCliente.Nombres))]),e._v(" "),a("span",[e._v(e._s(r.ProformaFactura.clienteByCliente.Apellidos))]),e._v(" "),a("span",[e._v(e._s(r.ProformaFactura.clienteByCliente.NombreEmpresa))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Creado Por","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.ProformaFactura.usuarioByCreadopor.Nombres))]),e._v(" "),a("span",[e._v(e._s(r.ProformaFactura.usuarioByCreadopor.Apellidos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Cantidad",width:"90px",prop:"CantidadFactura",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Descuento",width:"100px",prop:"Dscto",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Valor Unitario",width:"120px",prop:"ValorUnitario",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"IVA",width:"90px",prop:"Impuesto",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Total",width:"90px",prop:"Total",align:"center"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total>0,expression:"listQuery.total>0"}],attrs:{total:e.listQuery.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.handleFilter}})],1)])},i=[],n=(a("55dd"),a("6b54"),a("a481"),a("6724")),s=a("ed08"),l=a("754d"),o=a("333d"),c=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],u=c.reduce((function(e,t){return e[t.key]=t.display_name,e}),{}),d={name:"ComplexTable",directives:{waves:n["a"]},components:{Pagination:o["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return u[e]}},data:function(){return{selected:"",tableKey:0,rep_comprobantes:[],listLoading:!1,total:0,listQuery:{user:"",total:0,page:1,limit:10,offset:0,title:"",type:void 0,sort:"",fechas:null},importanceOptions:[1,2,3],calendarTypeOptions:c,repOptions:[{label:"Comprobante",key:"NC"},{label:"Nota Crédito",key:"CP"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},methods:{handleFilter:function(){var e=this;if(null!=this.listQuery.fechas){this.listLoading=!0;var t="%"+this.listQuery.title+"%",a="%"+this.selected+"%",r="%"+this.listQuery.user+"%";this.listQuery.offset=(this.listQuery.page-1)*this.listQuery.limit,this.$apollo.query({query:l["invoiceBalance"],variables:{fechaInicio:this.listQuery.fechas[0],fechaFin:this.listQuery.fechas[1],factura:t,tipo:a,offset:this.listQuery.offset,limit:this.listQuery.limit,usuario:r},error:function(e){this.error=JSON.stringify(e.message)}}).then((function(t){e.total=t.data.ProformaFacturaDetalle_aggregate.aggregate.sum.Total,e.rep_comprobantes=t.data.ProformaFacturaDetalle,e.listQuery.total=t.data.ProformaFacturaDetalle_aggregate.aggregate.Total,e.listLoading=!1}))}},handleModifyStatus:function(e,t){this.$message({message:"操作Success",type:"success"}),e.status=t},sortChange:function(e){var t=e.prop,a=e.order;"id"===t&&this.sortByID(a)},sortByID:function(e){this.listQuery.sort="ascending"===e?"+id":"-id",this.handleFilter()},resetTemp:function(){this.temp={id:void 0,importance:1,remark:"",timestamp:new Date,title:"",status:"published",type:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleDelete:function(e,t){this.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),this.rep_comprobantes.splice(t,1)},handleDownload:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-014a57fc"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then((function(t){var a=["Tipo de trámite","Cantidad","Monto"],r=["DscaTipoTramite","Cantidad","AmountInvoiced"],i=e.formatJson(r);t.export_json_to_excel({header:a,data:i,filename:"Reporte-tramites"}),e.downloadLoading=!1}))},formatJson:function(e){return console.log("hola"),this.rep_comprobantes.map((function(t){return e.map((function(e){return"timestamp"===e?Object(s["c"])(t[e]):t[e]}))}))},formatPrice:function(e){var t=(e/1).toFixed(2).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},getSortClass:function(e){var t=this.listQuery.sort;return t==="+".concat(e)?"ascending":"descending"}}},p=d,f=(a("1faa"),a("2877")),m=Object(f["a"])(p,r,i,!1,null,"1daf0152",null);t["default"]=m.exports},e1b7:function(e,t,a){a("522e"),e.exports=a("584a").Object.freeze},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);