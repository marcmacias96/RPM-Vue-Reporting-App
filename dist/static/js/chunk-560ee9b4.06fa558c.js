(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-560ee9b4"],{"17bc":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},model:{value:e.listQuery.type,callback:function(a){e.$set(e.listQuery,"type",a)},expression:"listQuery.type"}},e._l(e.sortOptions,(function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1),t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"Fecha Inicio","end-placeholder":"Fecha Fin",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.fechas,callback:function(a){e.$set(e.listQuery,"fechas",a)},expression:"listQuery.fechas"}}),t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" Search ")]),t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v(" Export ")])],1),t("el-row",{attrs:{gutter:0}},[t("el-col",{attrs:{offset:.5,xs:24,sm:24,lg:8}},[t("div",{staticClass:"chart-wrapper"},[t("bar-chart",{attrs:{"chart-data":e.barChartData}})],1)])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$apollo.loading,expression:"$apollo.loading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.rep_tramitesUsuario,border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange}},[t("el-table-column",{attrs:{label:"Nombre","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Nombres))])]}}])}),t("el-table-column",{attrs:{label:"Creación",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Creacion))])]}}])}),t("el-table-column",{attrs:{label:"Abierta",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Abierta))])]}}])}),t("el-table-column",{attrs:{label:"Por Cobrar",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.porCobrar))])]}}])}),t("el-table-column",{attrs:{label:"Pagada",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Pagada))])]}}])}),t("el-table-column",{attrs:{label:"Anulada",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Anulada))])]}}])}),t("el-table-column",{attrs:{label:"En proceso",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.enProceso))])]}}])}),t("el-table-column",{attrs:{label:"Lista Entrega",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.paraEntrega))])]}}])}),t("el-table-column",{attrs:{label:"Finalizada",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Finalizada))])]}}])}),t("el-table-column",{attrs:{label:"Total",width:"90px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.Total))])]}}])})],1)],1)},n=[],i=(t("4160"),t("d81d"),t("a434"),t("b680"),t("d3b7"),t("ac1f"),t("25f0"),t("5319"),t("159b"),t("6724")),s=t("ed08"),o=t("754d"),l=t("0ee0"),c=t("9b72"),u=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],d={name:"ComplexTable",components:{BarChart:c["a"]},directives:{waves:i["a"]},filters:{statusFilter:function(e){var a={published:"success",draft:"info",deleted:"danger"};return a[e]}},data:function(){return{barChartData:null,tableKey:0,rep_tramitesUsuario:null,total:0,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,name:"",type:"",sort:"",fechas:null},importanceOptions:[1,2,3],calendarTypeOptions:u,sortOptions:[{label:"Certificados",key:"CERTIFICADOS"},{label:"Inscripciones",key:"Inscripciones"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},mounted:function(){this.$apollo.subscriptions.addtram.skip=!0},methods:{handleFilter:function(){var e=this;null!=this.listQuery.fechas&&(this.$apollo.subscriptions.addtram.start(),this.$apollo.query({query:o["m"],variables:{fechaInicio:this.listQuery.fechas[0].toString(),fechaFin:this.listQuery.fechas[1].toString(),departamento:this.listQuery.type},error:function(e){this.error=JSON.stringify(e.message)}}).then((function(a){e.rep_tramitesUsuario=[];var t={nombres:[],totales:[]};a.data.Usuario.forEach((function(a){var r={Nombres:a.Apellidos+" "+a.Nombres,Creacion:a.creacion.aggregate.count,Abierta:a.abierta.aggregate.count,porCobrar:a.porCobrar.aggregate.count,Pagada:a.pagada.aggregate.count,Anulada:a.anulada.aggregate.count,enProceso:a.enProceso.aggregate.count,paraEntrega:a.lParaEntrega.aggregate.count,Finalizada:a.finalizado.aggregate.count,Total:a.total.aggregate.count};e.rep_tramitesUsuario.push(r),t.nombres.push(a.Apellidos+" "+a.Nombres),t.totales.push(a.total.aggregate.count)})),e.barChartData=t})))},handleModifyStatus:function(e,a){this.$message({message:"操作Success",type:"success"}),e.status=a},sortChange:function(e){var a=e.prop,t=e.order;"id"===a&&this.sortByID(t)},sortByID:function(e){this.listQuery.sort="ascending"===e?"+id":"-id",this.handleFilter()},resetTemp:function(){this.temp={id:void 0,importance:1,remark:"",timestamp:new Date,title:"",status:"published",type:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleUpdate:function(e){var a=this;this.temp=Object.assign({},e),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){a.$refs["dataForm"].clearValidate()}))},handleDelete:function(e,a){this.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),this.rep_tiposTramite.splice(a,1)},handleDownload:function(){var e=this;this.downloadLoading=!0,Promise.all([t.e("chunk-12076b3a"),t.e("chunk-0cf2a77e")]).then(t.bind(null,"4bf8")).then((function(a){var t=["Nombre","Creación","Abierta","Por Cobrar","Pagada","Anulada","En Proceso","L. P. Entrega","Finalizada","Total"],r=["Nombres","Creacion","Abierta","porCobrar","Pagada","Anulada","enProceso","paraEntrega","Finalizada","Total"],n=e.formatJson(r);a.export_json_to_excel({header:t,data:n,filename:"Reporte-Asignacion-Ordenes-Usuario"}),e.downloadLoading=!1}))},formatJson:function(e){return console.log("hola"),this.rep_tramitesUsuario.map((function(a){return e.map((function(e){return"timestamp"===e?Object(s["b"])(a[e]):a[e]}))}))},formatPrice:function(e){var a=(e/1).toFixed(2).replace(".",",");return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},getSortClass:function(e){var a=this.listQuery.sort;return a==="+".concat(e)?"ascending":"descending"}},apollo:{$subscribe:{addtram:{query:l["a"],variables:function(){if(null!=this.listQuery.fechas)return{fechaInicio:this.listQuery.fechas[0].toString(),fechaFin:this.listQuery.fechas[1].toString(),departamento:this.listQuery.type}},result:function(e){var a=this,t=e.data,r={nombres:[],totales:[]};t.Usuario.forEach((function(e){var t={Nombres:e.Apellidos+" "+e.Nombres,Creacion:e.creacion.aggregate.count,Abierta:e.abierta.aggregate.count,porCobrar:e.porCobrar.aggregate.count,Pagada:e.pagada.aggregate.count,Anulada:e.anulada.aggregate.count,enProceso:e.enProceso.aggregate.count,paraEntrega:e.lParaEntrega.aggregate.count,Finalizada:e.finalizado.aggregate.count,Total:e.total.aggregate.count};a.rep_tramitesUsuario.push(t),r.nombres.push(e.Apellidos+" "+e.Nombres),r.totales.push(e.total.aggregate.count)})),this.barChartData=r}}}}},p=d,g=(t("adc8"),t("2877")),h=Object(g["a"])(p,r,n,!1,null,"2aee9133",null);a["default"]=h.exports},7773:function(e,a,t){},adc8:function(e,a,t){"use strict";var r=t("7773"),n=t.n(r);n.a}}]);